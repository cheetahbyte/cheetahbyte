:root {
  --brand-green: #0e4d47;
  --active-green: #10b981; /* A more vibrant green for dark mode visibility */
  --spring-easing: cubic-bezier(0.175, 0.885, 0.32, 1.2);
}

.cmd-wrapper {
  position: fixed;
  bottom: 3rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 60;
  transition: opacity 0.5s ease;
}

.cmd-wrapper.focus-on { opacity: 0.6; }
.cmd-wrapper:hover { opacity: 1; }

.cmd-container {
  display: flex;
  align-items: center;
  padding: 6px;
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 26px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
  transition: all 0.5s var(--spring-easing);
  overflow: hidden;
}

.focus-on .cmd-container {
  background: #0a0a0a;
  border-color: rgba(255, 255, 255, 0.1);
}

.nav-group {
  display: flex;
  align-items: center;
  gap: 0px; /* Gap is handled by link margins for smoother animation */
}

.nav-link {
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;

  /* Fixed width for expanded state */
  width: 120px;
  opacity: 1;

  font-family: ui-monospace, monospace;
  font-weight: 700;
  font-size: 11px;
  text-transform: uppercase;
  color: #71717a;
  text-decoration: none;

  /* Animate everything for the 'extension' effect */
  transition:
    width 0.4s var(--spring-easing),
    padding 0.4s var(--spring-easing),
    opacity 0.3s ease,
    background 0.3s ease;

  border: 0;
  background: transparent;
  cursor: pointer;
  white-space: nowrap;
  overflow: hidden;
}

/* The 'Smooth Extension' logic: collapsed items have 0 width */
.nav-link.is-hidden {
  width: 0;
  padding-left: 0;
  padding-right: 0;
  opacity: 0;
  pointer-events: none;
}

.nav-link[data-active="true"] {
  background: var(--brand-green);
  color: white !important;
}

/* Dark Mode Active Link */
.focus-on .nav-link[data-active="true"] {
  background: rgba(255, 255, 255, 0.1);
  color: white !important;
}

/* ===== Focus Button ===== */
.focus-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(0, 0, 0, 0.05);
  /* Remove the margin-left so it relies on the divider's margin */
  margin-left: 0;
  border: 0;
  color: #71717a;
  font-family: ui-monospace, monospace;
  font-weight: 700;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.3s ease;
}
/* Light Mode: Zen Active */
.focus-btn.is-active {
  background: var(--brand-green);
  color: white;
}

/* Dark Mode: Zen Active (Green text/icon, no white background) */
.focus-on .focus-btn.is-active {
  background: rgba(16, 185, 129, 0.1); /* Subtle green tint */
  color: var(--active-green);
}

.nav-shortcut {
  font-size: 9px;
  padding: 1px 4px;
  border: 1px solid currentColor;
  border-radius: 4px;
  opacity: 0.6;
  margin-left: auto; /* Push to the right */
}

/* ===== Divider ===== */
.cmd-divider {
  width: 1px;
  height: 20px;
  background: rgba(0, 0, 0, 0.1);
  /* Use symmetric margins to push away from both sides equally */
  margin: 0 10px;
  transition: opacity 0.3s ease;
}

.focus-on .cmd-divider {
  background: rgba(255, 255, 255, 0.15);
}


@media (pointer: coarse) and (hover: none) {
  .nav-shortcut {
    display: none !important;
  }
}

@media (max-width: 768px) {
  /* 1. Hide all shortcuts on mobile */
  .nav-shortcut {
    display: none !important;
  }

  /* 2. Force the bar to be permanently extended */
  .nav-link.is-hidden {
    width: auto !important;
    opacity: 1 !important;
    padding: 10px 12px !important;
    pointer-events: auto !important;
    margin-right: 4px;
  }

  /* 3. Adjust width to 'auto' so links don't take up too much room */
  .nav-link {
    width: auto;
    min-width: 40px; /* Ensures enough room for icons */
    gap: 6px;
  }

  /* 4. Ensure text is always visible on mobile */
  .nav-text {
    display: inline;
    opacity: 1;
  }

  /* 5. Reduce container padding slightly for smaller screens */
  .cmd-container {
    padding: 4px;
    bottom: 1.5rem; /* Moves it closer to the bottom on mobile */
  }

  .cmd-divider {
    margin: 0 6px; /* Tighter spacing for mobile */
  }
}
